function resetModal(){modal.destroy(),modal=new tingle.modal({footer:!1,stickyFooter:!1,closeLabel:"Close",onOpen:function(){},onClose:function(){resetModal()},beforeClose:function(){return!0}})}function submitForm(a){console.log(a);var b=document.querySelector("form"),c=(new Spinner).spin(b),d=new FormData(b);d.append("g-recaptcha-response",a);var e=new XMLHttpRequest;e.open("POST","https://api.richardjeffords.com/siteMailer.php",!0),e.onload=function(){e.status>=400?modal.setContent("<h2>Error</h2><p>"+e.responseText+"</p>"):(modal.setContent("<h2>Success!</h2><p>"+e.responseText+"</p>"),b.reset()),grecaptcha.reset(),c.stop(),modal.open()},e.onerror=function(){grecaptcha.reset(),c.stop(),modal.setContent("<h2>Error</h2><p>"+e.responseText+"</p>"),modal.open()},e.send(d)}function checkScreen(a){windowWidth=getWindowWidth(),windowWidth>769?unfixPageHeight():fixPageHeight(a)}function fixPageHeight(a){featureHeight=document.getElementById("feature"+a).offsetHeight,contentHeight=document.getElementById("content"+a).offsetHeight,stepHeight=featureHeight+contentHeight,screenHeight=getWindowHeight(),stepHeight>screenHeight?document.getElementsByClassName("seq-canvas")[0].style.height=String(stepHeight)+"px":document.getElementsByClassName("seq-canvas")[0].style.height="100vh"}function unfixPageHeight(){document.getElementsByClassName("seq-canvas")[0].style.height="100%"}function getWindowWidth(){return window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth}function getWindowHeight(){return window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight}function enableSwiping(){return mySequence.hammerTime!==!1?(windowWidth=getWindowWidth(),windowWidth>769?mySequence.hammerTime.get("swipe").set({direction:Hammer.DIRECTION_ALL}):mySequence.hammerTime.get("swipe").set({direction:Hammer.DIRECTION_HORIZONTAL}),windowWidth):void 0}var sequenceElement=document.getElementById("sequence"),options={animateCanvas:!0,phaseThreshold:!1,preloader:!0,fadeStepWhenSkipped:!1,reverseWhenNavigatingBackwards:!0,reverseTimingFunctionWhenNavigatingBackwards:!0,swipeEvents:{left:function(a){a.next(),checkScreen()},right:function(a){a.prev(),checkScreen()},up:function(a){a.next(),checkScreen()},down:function(a){a.prev(),checkScreen()}},fallback:{speed:300}},mouseWheel={quietPeriod:900,animationTime:300},mySequence=sequence(sequenceElement,options),modal=new tingle.modal({footer:!1,stickyFooter:!1,closeLabel:"Close",onOpen:function(){},onClose:function(){resetModal()},beforeClose:function(){return!0}});mySequence.nextPhaseStarted=function(a){windowWidth=getWindowWidth(),windowWidth>769?unfixPageHeight():fixPageHeight(a)},mySequence.ready=function(){function a(a){a.preventDefault(),c=(new Date).getTime(),c-d<mouseWheel.quietPeriod+mouseWheel.animationTime||(mySequence.prev(),d=c)}var b,c,d=0;b=enableSwiping(),checkScreen(1),mySequence.throttledResize=function(){b=enableSwiping(),checkScreen(mySequence.currentStepId)},mySequence.utils.addEvent(document.getElementById("contact-link"),"click",a),mySequence.utils.addEvent(document.forms.namedItem("contact-form"),"submit",submitForm),mySequence.utils.addEvent(document.body,"keyup",function(a){switch(a.keyCode){case 39:a.preventDefault(),mySequence.next();break;case 34:case 40:b>768&&(a.preventDefault(),mySequence.next());break;case 37:a.preventDefault(),mySequence.prev();break;case 33:case 38:b>768&&(a.preventDefault(),mySequence.prev())}})};